{"version":3,"file":"js/785.0b483e2d.js","mappings":"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","sources":["webpack://shop_project/./src/components/user/Users.vue","webpack://shop_project/src/components/user/Users.vue","webpack://shop_project/./src/components/user/Users.vue?939f","webpack://shop_project/./src/components/user/Users.vue?a8d0"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userInfoChange(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"修改\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}})],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"删除\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUser(scope.row.id)}}})],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClose}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改信息\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClose}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUsers}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.resetuserInfo}},[_c('div',[_c('p',[_vm._v(\"当前的用户：\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色：\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"分配新角色： \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.roleList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateRole}},[_vm._v(\"确 定\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航栏 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 栅格式布局 -->\r\n      <!-- 搜索与添加按钮区域 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 用户列表信息区域 -->\r\n      <el-table :data=\"userList\" border stripe>\r\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\"></el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\"></el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <!-- 作用域插槽 -->\r\n          <template slot-scope=\"scope\">\r\n            <!-- {{scope.row}} 拿到的是这一行的数据 -->\r\n            <!-- 作用域插槽会覆盖掉prop的数据，所以此处prop可以不用写 -->\r\n            <el-switch v-model=\"scope.row.mg_state\" @change=\"userInfoChange(scope.row)\"></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <!-- 操作区域 -->\r\n        <el-table-column label=\"操作\" width=\"180px\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"修改\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.id)\"></el-button>\r\n            </el-tooltip>\r\n            <!-- 删除按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"删除\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeUser(scope.row.id)\"></el-button>\r\n            </el-tooltip>\r\n            <!-- 分配角色按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"分配角色\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"setRole(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1, 2, 5, 10]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\">\r\n      </el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 添加用户对话框 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addDialogClose\">\r\n      <!-- 表单区域 -->\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\" type=\"password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 按钮区域 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户信息对话框 -->\r\n    <el-dialog\r\n      title=\"修改信息\"\r\n      :visible.sync=\"editDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"editDialogClose\"\r\n      >\r\n      <!-- 表单区域 -->\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <!-- 按钮区域 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUsers\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色对话框 -->\r\n    <el-dialog\r\n      title=\"分配角色\"\r\n      :visible.sync=\"setRoleDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"resetuserInfo\">\r\n      <div>\r\n        <p>当前的用户：{{userInfo.username}}</p>\r\n        <p>当前的角色：{{userInfo.role_name}}</p>\r\n        <p>分配新角色：\r\n          <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in roleList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.roleName\"\r\n              :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    // 自定义校验规则\r\n    // 邮箱校验规则\r\n    const checkEmail = (rule, value, callback) => {\r\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-z0-9_-])+/\r\n      if (regEmail.test(value)) {\r\n        // 合法的邮箱\r\n        return callback()\r\n      }\r\n      callback(new Error('请输入合法的邮箱'))\r\n    }\r\n    // 手机号校验规则\r\n    const checkMobile = (rule, value, callback) => {\r\n      const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n      if (regMobile.test(value)) {\r\n        // 合法的手机号\r\n        return callback()\r\n      }\r\n      callback(new Error('请输入合法的手机号'))\r\n    }\r\n    return {\r\n      // 获取用户列表的查询参数对象\r\n      queryInfo: {\r\n        // 查询参数\r\n        query: '',\r\n        // 当前页码\r\n        pagenum: 1,\r\n        // 每页显示多少条数据\r\n        pagesize: 5\r\n      },\r\n      userList: [],\r\n      // 总记录数\r\n      total: 0,\r\n      // 控制对话框的显示与隐藏,默认false隐藏\r\n      addDialogVisible: false,\r\n      // 添加用户对象\r\n      addForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      // 添加用户对象规则\r\n      addFormRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 3, max: 10, message: '用户名长度在3~10个字符之间', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 6, max: 8, message: '密码长度在6~8个字符之间', trigger: 'blur' }\r\n        ],\r\n        // 此处规则可改进，看看有没有@\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          // 使用自定义校验规则\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 控制修改信息对话框的显示与隐藏\r\n      editDialogVisible: false,\r\n      // 修改信息对象\r\n      editForm: {},\r\n      // 修改信息规则\r\n      editFormRules: {\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 控制分配角色对话框的显示与隐藏\r\n      setRoleDialogVisible: false,\r\n      // 该行的用户信息\r\n      userInfo: {},\r\n      // 所有角色的数据列表,注意：是数组形式\r\n      roleList: [],\r\n      // 已选中的角色的id值\r\n      selectedRoleId: ''\r\n    }\r\n  },\r\n  created () {\r\n    this.getUserList()\r\n  },\r\n  methods: {\r\n    // 获取用户列表数据\r\n    async getUserList () {\r\n      const { data: res } = await this.$http.get('users', { params: this.queryInfo })\r\n      // console.log(res)\r\n      if (res.meta.status !== 200) return this.$message.error('数据列表获取失败')\r\n      this.userList = res.data.users\r\n      this.total = res.data.total\r\n    },\r\n    // 监听pagesize改变事件，拿到最新的每页数据条数\r\n    handleSizeChange (newsize) {\r\n      this.queryInfo.pagesize = newsize\r\n      // 重新渲染数据\r\n      this.getUserList()\r\n    },\r\n    // 监听页码变化，拿到最新页码\r\n    handleCurrentChange (newpage) {\r\n      this.queryInfo.pagenum = newpage\r\n      // 重新渲染数据\r\n      this.getUserList()\r\n    },\r\n    // 监听数据的变化\r\n    async userInfoChange (userInfo) {\r\n      // console.log(userInfo)\r\n      const { data: res } = await this.$http.put(`users/${userInfo.id}/state/${userInfo.mg_state}`)\r\n      if (res.meta.status !== 200) {\r\n        userInfo.mg_state = !userInfo.mg_state\r\n        return this.$message.error('修改数据失败！')\r\n      }\r\n      this.$message.success('修改数据成功')\r\n    },\r\n    // 监听对话框的关闭事件，重置表单内容\r\n    addDialogClose () {\r\n      this.$refs.addFormRef.resetFields()\r\n    },\r\n    // 点击确定按钮，添加用户并提交\r\n    addUser () {\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        // valid表示校验是否通过\r\n        if (!valid) return\r\n        // console.log('校验通过')\r\n        // 校验通过，可以发起添加用户的网络请求\r\n        const { data: res } = await this.$http.post('users', this.addForm)\r\n        if (res.meta.status !== 201) return this.$message.error('添加用户失败！')\r\n        this.$message.success('添加用户成功！')\r\n        // console.log(res)\r\n        // 重新渲染列表\r\n        this.getUserList()\r\n        // 隐藏对话框\r\n        this.addDialogVisible = false\r\n      })\r\n    },\r\n    // 点击修改按钮，修改信息\r\n    async showEditDialog (id) {\r\n      const { data: res } = await this.$http.put('users/' + id)\r\n      if (res.meta.status !== 200) return this.$message.error('修改用户信息失败！')\r\n      // 如果能查询到这个id，就能返回相关信息res，打开对话框-》可进行修改信息\r\n      this.editDialogVisible = true\r\n      this.editForm = res.data\r\n      // console.log(res.data)\r\n      // 由于返回来的数据没有邮箱和手机号，所以渲染到对话框中的邮箱和手机号是空的\r\n    },\r\n    // 监听修改对话框的关闭事件，重置表单内容\r\n    editDialogClose () {\r\n      this.$refs.editFormRef.resetFields()\r\n    },\r\n    // 修改用户信息并提交\r\n    async editUsers () {\r\n      const { data: res } = await this.$http.put('users/' + this.editForm.id,\r\n        {\r\n          email: this.editForm.email,\r\n          mobile: this.editForm.mobile\r\n        })\r\n      // console.log(res)\r\n      if (res.meta.status !== 200) return this.$message.error('更新数据失败！')\r\n      this.$message.success('更新数据成功！')\r\n      this.editForm = res.data\r\n      this.getUserList()\r\n      this.editDialogVisible = false\r\n    },\r\n    // 点击删除按钮，删除用户\r\n    async removeUser (id) {\r\n      // 用法：\r\n      // $confirm(message, title, options)\r\n      const result = await this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n        center: true\r\n      }).catch(err => err)// 此处将错误抛出，赋给result\r\n      // console.log(result)\r\n      // 当点击确认时，result的值是confirm\r\n      // 当点击取消时，result的值是cancel\r\n      if (result !== 'confirm') return this.$message.info('已取消删除')\r\n\r\n      // 发起删除请求\r\n      const { data: res } = await this.$http.delete('users/' + id)\r\n      if (res.meta.status !== 200) return this.$message.error('删除用户失败！')\r\n      this.$message.success('删除用户成功！')\r\n      // 重新渲染列表\r\n      this.getUserList()\r\n    },\r\n    // 分配角色\r\n    async setRole (userInfo) {\r\n      // 这一行的信息\r\n      this.userInfo = userInfo\r\n\r\n      // 获取所有角色的数据列表\r\n      const { data: res } = await this.$http.get('roles')\r\n      if (res.meta.status !== 200) return this.$message.error('获取角色列表失败！')\r\n      // 所有的角色列表信息\r\n      this.roleList = res.data\r\n\r\n      this.setRoleDialogVisible = true\r\n    },\r\n    // 点击确定按钮，保存分配角色的结果\r\n    async updateRole () {\r\n      // 如果没有选择要分配的角色，提示选择\r\n      if (!this.selectedRoleId) return this.$message.error('请选择要分配的角色')\r\n\r\n      // 发起请求，将更改提交到数据库\r\n      const { data: res } = await this.$http.put(`users/${this.userInfo.id}/role`, { rid: this.selectedRoleId })\r\n      if (res.meta.status !== 200) return this.$message.error('更新角色失败！')\r\n      this.$message.success('更新角色成功')\r\n      // 重新渲染用户列表\r\n      this.getUserList()\r\n      // 关闭对话框\r\n      this.setRoleDialogVisible = false\r\n    },\r\n    // 监听对话框的关闭事件，将选择的信息重置\r\n    resetuserInfo () {\r\n      this.userInfo = {}\r\n      this.selectedRoleId = ''\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=07a7147e&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","on","getUserList","model","value","queryInfo","query","callback","$$v","$set","expression","slot","$event","addDialogVisible","userList","scopedSlots","_u","key","fn","scope","userInfoChange","row","mg_state","showEditDialog","id","removeUser","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClose","ref","addForm","addFormRules","username","password","email","mobile","staticClass","addUser","editDialogVisible","editDialogClose","editForm","editFormRules","editUsers","setRoleDialogVisible","resetuserInfo","_s","userInfo","role_name","selectedRoleId","_l","roleList","item","roleName","updateRole","staticRenderFns","data","required","message","trigger","min","max","validator","created","methods","params","confirmButtonText","cancelButtonText","type","center","rid","component"],"sourceRoot":""}